{% assign current_lang = site.active_lang | default: site.default_lang | default: 'de' %}
{% assign strings = site.data[current_lang].strings %}
{% assign blog_strings = strings.home.blog %}
{% assign localized_posts = site.posts | where: "lang", current_lang %}
{% assign sorted_posts = localized_posts | sort: "date" | reverse %}
<section class="space-y-8">
  <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
    <div class="space-y-3">
      <h2 class="text-2xl font-semibold text-gray-900 lg:text-3xl dark:text-gray-100">
        {{ blog_strings.title }}
      </h2>
      <p class="max-w-3xl text-base leading-relaxed text-gray-700 dark:text-gray-300">
        {{ blog_strings.description }}
      </p>
    </div>
    <a
      href="{{ site.baseurl }}{{ blog_strings.cta_href }}"
      class="inline-flex items-center justify-center px-4 py-2 text-sm font-semibold text-blue-700 transition bg-blue-100 rounded-full hover:bg-blue-200 dark:bg-fuchsia-900/40 dark:text-fuchsia-200 dark:hover:bg-fuchsia-900/60"
    >
      {{ blog_strings.cta_label }}
    </a>
  </div>
  {% if sorted_posts.size > 0 %}
    <div class="grid gap-6 md:grid-cols-3">
      {% for post in sorted_posts limit:3 %}
        <article class="flex flex-col h-full p-6 space-y-3 border rounded-2xl border-gray-200 bg-white/80 shadow-sm backdrop-blur dark:border-zinc-700 dark:bg-zinc-900/70">
          <p class="text-xs font-semibold tracking-wide uppercase text-gray-500 dark:text-gray-400">
            {{ post.date | date: "%d.%m.%Y" }} Â· {{ post.category }}
          </p>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
            {{ post.title }}
          </h3>
          <p class="text-sm leading-relaxed text-gray-700 dark:text-gray-300">
            {{ post.excerpt | strip_html | truncate: 140 }}
          </p>
          <a
            class="inline-flex items-center text-sm font-semibold text-blue-600 transition hover:text-blue-800 dark:text-fuchsia-400 dark:hover:text-fuchsia-300 mt-auto"
            href="{{ post.url }}"
          >
            {{ strings.navigation.blog }}
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              class="w-4 h-4 ml-1"
              fill="currentColor"
            >
              <path
                d="M14.59 7L9 12.59 10.41 14 16 8.41 16 13 18 13 18 5 10 5 10 7z"
              />
              <path d="M19 19H5V5H7V3H5C3.89 3 3 3.9 3 5V19A2 2 0 0 0 5 21H19C20.1 21 21 20.1 21 19V17H19Z" />
            </svg>
          </a>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-sm text-gray-600 dark:text-gray-300">
      {{ strings.no_entries.blog }}
    </p>
  {% endif %}
</section>

