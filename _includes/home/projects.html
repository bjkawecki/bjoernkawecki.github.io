{% assign current_lang = site.active_lang | default: site.default_lang | default: 'de' %}
{% assign strings = site.data[current_lang].strings %}
{% assign projects_strings = strings.home.projects %}
{% assign localized_projects = site.projects | where: "lang", current_lang | sort: "started" | reverse %}
<section class="space-y-8">
  <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
    <div class="space-y-3">
      <h2 class="text-2xl font-semibold text-gray-900 lg:text-3xl dark:text-gray-100">
        {{ projects_strings.title }}
      </h2>
      <p class="max-w-3xl text-base leading-relaxed text-gray-700 dark:text-gray-300">
        {{ projects_strings.description }}
      </p>
    </div>
    <a
      href="{{ site.baseurl }}{{ projects_strings.cta_href }}"
      class="inline-flex items-center justify-center px-4 py-2 text-sm font-semibold text-blue-700 transition bg-blue-100 rounded-full hover:bg-blue-200 dark:bg-fuchsia-900/40 dark:text-fuchsia-200 dark:hover:bg-fuchsia-900/60"
    >
      {{ projects_strings.cta_label }}
    </a>
  </div>
  {% if localized_projects.size > 0 %}
    <div class="grid gap-6 md:grid-cols-3">
      {% for project in localized_projects limit:3 %}
        <article class="flex flex-col h-full p-6 space-y-4 border rounded-2xl border-gray-200 bg-white/80 shadow-sm backdrop-blur dark:border-zinc-700 dark:bg-zinc-900/70">
          <div class="space-y-2">
            <p class="text-xs font-semibold tracking-wide uppercase text-gray-500 dark:text-gray-400">
              {{ project.category }}
            </p>
            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
              {{ project.title }}
            </h3>
            <p class="text-sm leading-relaxed text-gray-700 dark:text-gray-300">
              {{ project.description | default: project.excerpt | strip_html | truncate: 140 }}
            </p>
          </div>
          {% if project.techstack %}
            <ul class="flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-300">
              {% for tech in project.techstack limit:5 %}
                <li class="px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-gray-200">
                  {{ tech }}
                </li>
              {% endfor %}
            </ul>
          {% endif %}
          <div class="pt-2 mt-auto">
            <a
              href="{{ project.url }}"
              class="inline-flex items-center text-sm font-semibold text-blue-600 transition hover:text-blue-800 dark:text-fuchsia-400 dark:hover:text-fuchsia-300"
            >
              {{ strings.navigation.projects }}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                class="w-4 h-4 ml-1"
                fill="currentColor"
              >
                <path
                  d="M14.59 7L9 12.59 10.41 14 16 8.41 16 13 18 13 18 5 10 5 10 7z"
                />
                <path d="M19 19H5V5H7V3H5C3.89 3 3 3.9 3 5V19A2 2 0 0 0 5 21H19C20.1 21 21 20.1 21 19V17H19Z" />
              </svg>
            </a>
          </div>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-sm text-gray-600 dark:text-gray-300">
      {{ strings.no_entries.projects }}
    </p>
  {% endif %}
</section>

